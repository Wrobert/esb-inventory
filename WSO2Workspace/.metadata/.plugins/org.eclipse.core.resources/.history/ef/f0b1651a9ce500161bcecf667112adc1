<?xml version="1.0" encoding="UTF-8"?>
<proxy name="InventoryService" startOnLoad="true" transports="http https" xmlns="http://ws.apache.org/ns/synapse">
    <target>
        <endpoint>
            <address uri="http://localhost:8300/services/InventoryService"/>
        </endpoint>
        <inSequence>
            <log level="custom" separator=",">
                <property name="InventoryService" value="Inventory Service Started."/>
            </log>
            <property expression="//operation" name="operation" scope="default" type="STRING"/>
            <property expression="//fileLocation" name="fileLocation" scope="default" type="STRING"/>
            <property expression="//fileName" name="fileName" scope="default" type="STRING"/>
            <property expression="//fileBeforeProcess" name="fileBeforeProcess" scope="default" type="STRING"/>
            <property expression="//fileAfterProcess" name="fileAfterProcess" scope="default" type="STRING"/>
            <log description="logRequest" level="full"/>
            <!-- property name="FORCE_SC_ACCEPTED" scope="axis2" type="STRING" value="true"/> 
            <fileconnector.search>
                <source>{$ctx:source}</source>
                <filePattern>.*\.xml</filePattern>
                <recursiveSearch>false</recursiveSearch>
            </fileconnector.search>
            <iterate expression="//ns:result/ns:file" xmlns:ns="http://org.wso2.esbconnectors.FileConnector">
                <target>
                    <sequence>
                    -->
            <call-template description="Calll FileConnectorTemplate" target="FileConnectorTemplate">
                <with-param name="ArgOperation" value="{{//operation}}"/>
            </call-template>
            <!-- 
                    </sequence>
                </target>
            </iterate>
             -->
        </inSequence>
        <outSequence/>
        <faultSequence/>
    </target>
</proxy>
